/*revLifter tag 1*/
if(function(){"use strict";console.log("revGo");function e(e,t,r,i,o){this.dataCollectorEndpoint=e,this.thirdPartyCookieEndPoint=t,this.cookieLength=r,this.firstPartyCookieDomain=i,this.sessionDays=o,this.queue=window[window.RevLifterObject].q,this.siteId=null,this.userId=null,this.sessionId=null,this.revLifterCookie=null,this.queueHandlers=[],this.customFunctions=[],this.registry={lightboxes:{},lastScrollPc:0}}e.prototype.bootstrap=function(){a("BOOTSTRAP"),this.revLifterCookie=new i(this.cookieLength,this.firstPartyCookieDomain,this.sessionDays),this.revLifterCookie.load(),a("RevLifter Cookie Loaded"),this.queue.process=function(){this.processQueue()}.bind(this),this.queue.push=function(e){Array.prototype.push.apply(this,[e]),this.process()},a("Start initial queue processing"),this.processQueue(),a("Initial queue processing complete"),a("Process all custom functions"),this.processCustomFunctions(),a("All custom functions processed"),a("REVLIFTER COMPLETE"),this.revLifterCookie.persist()},e.prototype.cookie=function(){return this.revLifterCookie},e.prototype.getContext=function(){return this.revLifterCookie.data},e.prototype.getRegistry=function(){return this.registry},e.prototype.newSession=function(){this.revLifterCookie.newSession(),this.revLifterCookie.persist()},e.prototype.processQueue=function(){this.batch=this.queue.splice(0),this.queue.splice(0,this.queue.length);for(var e=0;e<this.batch.length;e++)for(var t=0;t<this.queueHandlers.length;t++)this.queueHandlers[t].handles(this.batch[e][0])&&this.queueHandlers[t].process(this.batch[e])},e.prototype.processCustomFunctions=function(){this.customFunctions.forEach(function(e,t){e()})},e.prototype.registerQueueHandler=function(e){this.queueHandlers.push(e)},e.prototype.createPayloadMessage=function(e,t){return{timeStamp:111111111,payloadType:e,payload:t,context:this.cookie().getData()}},e.prototype.registerCustomFunction=function(e){this.customFunctions.push(e)};var d=new e("https://api.revlifter.io/v1/kinesis-collect","https://api.official-deals.co.uk/v1/pixel",365,"cottonon.com",30),t={handles:function(e){return"load"===e},process:function(e){a("Started LoadQueueHandler processing: "+e[1]),d.siteId=e[1],a("Site identified as "+d.siteId),d.revLifterCookie.isSet()?d.cookie().checkSession():(a("No 1st party cookie set, initialising"),d.cookie().init(d.siteId,o()),d.cookie().persist(),a("Initialised Cookie with values: "+JSON.stringify(d.cookie().getData()))),d.userId=d.cookie().get("u"),d.sessionId=d.cookie().get("s"),a("Finished LoadQueueHandler processing")}};d.registerQueueHandler(t);var r={handles:function(e){return"send"===e},process:function(e){switch(a("Started SendQueueHandler processing:"+e[1]),a("Payload: "+JSON.stringify(e[2])),e[1]){case"dataCollector":a("Making AJAX request to "+d.dataCollectorEndpoint),n(d.dataCollectorEndpoint,JSON.stringify({Data:[e[2]]}),function(e){a("Data collector returned 200 response")})}a("Finished SendQueueHandler Processing")}};d.registerQueueHandler(r);var i=function(e,t,r){this.data={},this.days=e,this.cookieDomain=t,this.sessionDays=r,this.name="REVLIFTER",this.stale=!1};i.prototype.getData=function(){return this.data},i.prototype.checkSession=function(){Math.floor(Date.now()/1e3)>this.data.se&&(this.newSession(),this.save(),this.saveThirdParty())},i.prototype.newSession=function(){this.data.s=o(),this.data.se=Math.floor(Date.now()/1e3)+86400*this.sessionDays,this.stale=!0},i.prototype.load=function(){for(var e=this.name+"=",t=decodeURIComponent(document.cookie).split(";"),r=0;r<t.length;r++){for(var i=t[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(e))return this.data=JSON.parse(i.substring(e.length,i.length)),this.data}return this.data={},{}},i.prototype.init=function(e,t){this.set("w",e),this.set("u",t),this.newSession(),this.stale=!0},i.prototype.get=function(e){return this.data[e]},i.prototype.set=function(e,t){null===this.data&&this.data.hasOwnProperty(e)||(this.data[e]=t)},i.prototype.save=function(){if(this.data!=={}){var e=new Date;e.setTime(e.getTime()+24*this.days*60*60*1e3);var t="; expires="+e.toGMTString();document.cookie=this.name+"="+JSON.stringify(this.data)+t+"; path=/ ; domain=."+this.cookieDomain,a("First Party Cookie Saved")}},i.prototype.saveThirdParty=function(){var e=document.createElement("img");e.src=d.thirdPartyCookieEndPoint+"?c="+encodeURI(JSON.stringify(this.data)),document.getElementsByTagName("body")[0].appendChild(e),a("Third party cookie pixel drop complete: "+d.thirdPartyCookieEndPoint+"?c="+encodeURI(JSON.stringify(this.data)))},i.prototype.isSet=function(){return 0<Object.keys(this.data).length},i.prototype.persist=function(){this.stale&&(this.save(),this.saveThirdParty(),this.stale=!1)};d.registerCustomFunction(function(e){var t,r,i,o,n,s,a;"/AU/bag/"===window.location.pathname&&(t=function(){return window.data},r=function(){revlifter("send","dataCollector",d.createPayloadMessage("userdata",{data:data}))},i=200,o=10,n=Math.round(1e3*(void 0!==o?o:10)/i),s=0,a=setInterval(function(){n<s?clearInterval(a):(t()&&(clearInterval(a),setTimeout(function(){r()},20)),s++)},i||500))});var o=function(){var e,t,r="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(r+="-"),r+=(12===e?4:16===e?3&t|8:t).toString(16);return r},n=function(e,t,r){var i="string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return o.open("POST",e),o.onreadystatechange=function(){3<o.readyState&&200===o.status&&r(o.responseText)},o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","application/json"),o.send(i),o},u=function(e,t){var r=t||window.location.href,i=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(r);return i?i[1]:null};d.getQueryString=u;u=function(e,t){var r=t||window.location.href,i=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(r);return i?i[1]:null};window.addEventListener("message",function(e){e.data.hasOwnProperty("revlifter")&&(e.data.revlifter.params.eventOrigin=e.origin,revlifter(e.data.revlifter.handler,e.data.revlifter.params))});function s(e,t,r){e.style.opacity=0,null===r&&(r=16);var i=function(){e.style.opacity=+e.style.opacity+.1,+e.style.opacity<1?window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16):t&&t()};i()}var a=function(e){var t=new Date;void 0===window.rlstart?(window.rltiming=0,window.rlstart=t.getMilliseconds()):window.rltiming=t.getMilliseconds()-window.rlstart};d.fadeIn=s;function f(){var e=window.innerHeight||(document.documentElement||document.body).clientHeight,t=function(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)}(),r=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,i=t-e;return Math.floor(r/i*100)}function p(e,t){var r=document.createElement("script");r.src=e+(0<=e.indexOf("?")?"&":"?")+"callback="+t,document.getElementsByTagName("head")[0].appendChild(r)}function l(){var e=document.createElement("iframe");return e.frameBorder="0",e.scrolling="no",e.style.width="100%",e}function c(e){var t=l();return t.src=e,t.style.height="100%",t.style.top="0",t.style.left="0",t.style.display="none",t.style.opacity=1,t.style.background="transparent",t.style.zIndex=-1,t.style.position="fixed",t.allowTransparency="true",t}function h(e){if("undefined"!=typeof Storage){if("false"===u("rl-preview-"+e))return localStorage.removeItem("rl-preview-"+e),!1;if("true"===localStorage.getItem("rl-preview-"+e)||"true"===u("rl-preview-"+e))return localStorage.setItem("rl-preview-"+e,"true"),!0}return!1}var g={handles:function(e){return"register_iframe"===e},process:function(e){if(-1<e[1].urls.indexOf(window.location.pathname)){if("preview"===e[1].mode&&!h("iframe"))return;u("reveal")&&setTimeout(function(){revlifter("iframe_offer_reveal",{eventOrigin:e[1].src,revealType:"standard",revealId:u("reveal"),personalised:u("p"),keyword:u("keyword"),vc:u("vc"),clickref:u("clickref")})},100);var t=document.getElementById("rlwrapper");t.style.textAlign="center";var r=document.createElement("img");r.id="rlloader",r.src="https://assets.revlifter.io/global/spinners/spinner1.gif",r.style.align="center";var i=encodeURI(window.location.href),o=e[1].src+"?iframe=1&c="+encodeURI(JSON.stringify(d.getContext()))+"&url="+encodeURIComponent(i)+"&referrer="+encodeURIComponent(u("referrer")||document.location.href),n=l();n.src=o,n.style.height="1px",n.style.visibility="hidden",n.style.opacity=0,d.getRegistry().iframe=n,d.getRegistry().iframeDomain=e[1].src,d.getRegistry().iframeLoader=r,t.appendChild(r),t.appendChild(n)}}};d.registerQueueHandler(g);var y={handles:function(e){return"iframe_height_adjust"===e},process:function(e){var t=d.getRegistry().iframe;d.getRegistry().iframeHeight=e[1]+"px","visible"===t.style.visibility&&(t.style.height=e[1].height+"px")}};d.registerQueueHandler(y);var m={handles:function(e){return"iframe_loaded"===e},process:function(e){var t=d.getRegistry().iframe;d.getRegistry().iframeLoader.style.display="none",t.style.visibility="visible",t.style.height=d.getRegistry().iframeHeight,s(t)}};d.registerQueueHandler(m);var v={handles:function(e){return"iframe_offer_reveal"===e},process:function(e){var t=l();t.src=e[1].eventOrigin+"/offer-reveal/"+e[1].revealId+"?keyword="+u("keyword")+"&referrer="+encodeURIComponent(u("referrer")||document.referrer)+"&p="+e[1].personalised+"&vc="+e[1].vc+"&clickref="+e[1].clickref,u("rl_preview")&&(t.src+="&rl_preview="+u("rl_preview")),t.style.height="100%",t.style.top="0",t.style.left="0",t.style.opacity=0,t.style.background="transparent",t.style.zIndex=99999999,t.style.position="fixed",t.allowTransparency="true",d.getRegistry().revealIframe=t,d.getRegistry().revealiframeDomain=e[1].src,document.body.appendChild(t),s(t)}};d.registerQueueHandler(v);var w={handles:function(e){return"iframe_reveal_close"===e},process:function(e){!function(e,t){e.style.opacity=1;var r=function(){e.style.opacity=+e.style.opacity-.1,0<+e.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16):t&&t()};r()}(d.getRegistry().revealIframe,function(){null!==d.getRegistry().revealIframe&&(document.body.removeChild(d.getRegistry().revealIframe),d.getRegistry().revealIframe=null)})}};d.registerQueueHandler(w);var b={handles:function(e){return"iframe_reveal_loaded"===e},process:function(e){console.log("Reveal Loaded message recieved"),d.getRegistry().hasOwnProperty("revealIframe")&&(d.getRegistry().revealIframe.style.zIndex=9999999,d.getRegistry().revealIframe.style.display="block")}};d.registerQueueHandler(b);var R={handles:function(e){return"register_lightbox"===e},process:function(e){var r=e[1];if(d.getRegistry().lightboxes[r.id]={config:r},"undefined"!=typeof Storage&&-1!==r.urls.indexOf(window.location.pathname)&&(window.MSInputMethodContext&&document.documentMode,"preview"!==r.mode||h("lightbox"))){var t=encodeURI(window.location.href),i=r.src+"/lightbox/"+e[1].id+"?c="+encodeURI(JSON.stringify(d.getContext())),o=r.src+"/lightbox/"+e[1].id+"/status/jsonp?c="+encodeURI(JSON.stringify(d.getContext()));if(r.hasOwnProperty("additionalQuery")&&(i+="&"+r.additionalQuery),i+="&url="+t,r.iframeSrc=i,u("lbid")&&r.id===parseInt(u("lbid")))return r.additionalQuery="postback=1&pbtype="+u("pbtype"),"voucher_reveal"===u("pbtype")&&(r.additionalQuery+="&offerid="+u("offerid")),u("i")&&(r.additionalQuery+="&i="+u("i")),setTimeout(function(){revlifter("lightbox_reveal_force",r)}),void(r.hasOwnProperty("onRegister")&&r.onRegister(d,function(t){var e="rlCallbackLightboxStatus"+r.id;window[e]=function(e){t(e)},p(o,e)}));if(r.hasOwnProperty("displayRate"))if(Math.floor(101*Math.random())<100-r.displayRate)return!1;var n=function(e){setTimeout(function(){revlifter("lightbox_reveal",e)},e.delay)},s=function(e){document.getElementsByTagName("BODY")[0].removeEventListener("mouseleave",s),n(r)},a=function(e){var t=f();t<d.getRegistry().lastScrollPc&&(window.removeEventListener("scroll",a),n(r)),d.getRegistry().lastScrollPc=t},l=function(e){r.hasOwnProperty("options")&&r.options.hasOwnProperty("scrolled_pc")&&f()>=r.options.scrolled_pc&&(window.removeEventListener("scroll",l),n(r))};if(!d.getQueryString("autopop"))switch(r.trigger){case"ON_LANDING":n(r);break;case"ON_EXIT":var c=document.getElementsByTagName("BODY")[0];"ontouchstart"in window||navigator.msMaxTouchPoints?setTimeout(function(){window.addEventListener("scroll",a,!1)},1):setTimeout(function(){c.addEventListener("mouseleave",s)},1);break;case"ON_SCROLL_PC":window.addEventListener("scroll",l,!1)}r.hasOwnProperty("onRegister")&&r.onRegister(d,function(t){var e="rlCallbackLightboxStatus"+r.id;window[e]=function(e){t(e)},p(o,e)})}}};d.registerQueueHandler(R);var S={handles:function(e){return"lightbox_reveal"===e},process:function(e){if(!d.getRegistry().revealIframe){var t=e[1],r=c(t.iframeSrc);d.getRegistry().revealIframe=r,d.getRegistry().revealiframeDomain=e[1].src,document.body.appendChild(r)}}};d.registerQueueHandler(S);var I={handles:function(e){return"lightbox_reveal_force"===e},process:function(e){if(!d.getRegistry().revealIframe){var t=e[1],r=c(t.iframeSrc+"&force=1");d.getRegistry().revealIframe=r,d.getRegistry().revealiframeDomain=e[1].src,document.body.appendChild(r)}}};d.registerQueueHandler(I);var k={handles:function(e){return"lightbox_save"===e},process:function(e){var t=e[1].lightboxId;console.log("Saving lightbox "+t);var r={id:t,pathname:window.location.pathname},i=localStorage.getItem("rl-lightbox-save");if(i&&JSON.parse(i).id===r.id)return void revlifter("iframe_reveal_close",{});localStorage.setItem("rl-lightbox-save",JSON.stringify(r));var o=d.getRegistry().lightboxes[t].config;o.hasOwnProperty("onSave")&&o.onSave(d,r),revlifter("iframe_reveal_close",{})}};d.registerQueueHandler(k);var C={handles:function(e){return"consumer_graph_handler"===e},process:function(e){window.sessionStorage&&e[1].endpoints.map(function(r){var e="rlcg_"+r.endpoint;if(!sessionStorage.getItem(e)){sessionStorage.setItem(e,"1");var t="rlcgtransactioncb_"+Math.floor(1e5*Math.random());window[t]=function(e){var t=null;r.hasOwnProperty("nullData")&&(t=r.nullData),0<e.transactions.length&&(t=e),null!==t&&revlifter("send","dataCollector",d.createPayloadMessage("cg_transactions",t))};var i=document.createElement("script");i.setAttribute("type","application/javascript"),i.setAttribute("src",r.uri+"&jsonp="+t),document.body.appendChild(i)}})}};d.registerQueueHandler(C),d.bootstrap()}(),"/AU/discount-codes.html"===window.location.pathname||"/AU/discount-codes.html/"===window.location.pathname){var d=document.querySelector("#primary.primary-content"),error=document.querySelector(".error-callout");if(error&&(document.querySelector(".error-callout").remove(),document.querySelector(".carousel-wrapper").remove()),d){var dr=document.createElement("div");dr.id="rlwrapper",d.appendChild(dr),revlifter("register_iframe",{urls:["/AU/discount-codes.html","/AU/discount-codes.html/"],target:"rlwrapper",src:"//cottonon.official-coupons.com"})}}