!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"!=typeof window.CustomEvent&&(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}(),"object"!=typeof _rmData&&(_rmData=[]),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),"object"!=typeof window.Remarkety&&(window.Remarkety=function(){function a(){function a(){return!(!k.hasOwnProperty("email")||null===k.email)||(!(!k.hasOwnProperty("id")||null===k.id)||!(!k.hasOwnProperty("trackingId")||null===k.trackingId))}function c(){return!!n||(!navigator||!navigator.doNotTrack)&&(!window||!window.doNotTrack)}function d(d,e,f){if(!c())return void console.debug("doNotTrack is enabled");if(m&&!a())return void w.push([d,e,f]);var h="events";"identify"===d&&(h="identify");var i=new CustomEvent("firstEventResponse"),j=l+"/"+h+".json",n={};e=e||{},Array.isArray(e)&&(console.log("Event data must be an object"),e={}),n.customer=k,n.action=d,n.properties=e,n.properties.pageUrl=window.location.href,n.properties.pageTitle=document.title||"";var o=function(){g(j,function(a,c){try{"string"==typeof a&&(a=JSON.parse(a))}catch(d){window.console&&console.log("Could not parse response from server")}"object"==typeof a&&a.hasOwnProperty("identityGUID")&&(k.identityGUID=a.identityGUID,b(p,k,30)),u&&(u=!1,window.dispatchEvent(i)),"function"==typeof f&&f(a,c)},n)};return v||!u?(v=!1,o()):window.addEventListener("firstEventResponse",o,!1),!0}function e(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)}))}function g(a,b,c,d,f){try{var d=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");return d.open(c?"POST":"GET",a,1),d.setRequestHeader("Content-type","text/plain"),d.setRequestHeader("x-rm-store",j),d.responseType="json","withCredentials"in d&&(d.withCredentials=!0),d.onreadystatechange=function(){d.readyState>3&&200===d.status&&"function"==typeof b?b(d.response,d):d.readyState>3&&200!==d.status&&"function"==typeof f&&f(d.response,d)},c=e(JSON.stringify(c)),d.send(c),!0}catch(g){return window.console&&console.log(g),!1}}function h(){if(!a())return!1;if(w&&w.length>0)for(var b;b=w.shift();)b&&d.apply(null,b);return!0}var i=function(a,c){c="undefined"==typeof c||c;var e=null,f=null,g=null;"object"==typeof a?(a.hasOwnProperty("email")&&(e=a.email),a.hasOwnProperty("id")&&(f=a.id),a.hasOwnProperty("trackingId")&&(g=a.trackingId)):""!==a&&(e=a,a={email:e});var i=!1;return k.email!==e&&null!==e&&(i=!0,k.email=e),k.trackingId!==g&&null!==g&&(i=!0,k.trackingId=g),k.id!==f&&null!==f&&(i=!0,k.id=f),i&&(b(p,k,30),c&&d("identify",a),h()),!0};return{setStoreKey:function(a){j=a},setCustomer:i,setCustomerEmail:function(a){return i({email:a})},setCustomerId:function(a){return"undefined"!=typeof a&&null!==a&&("string"==typeof a&&(a=a.trim()),0!==a.length&&i({id:a}))},productView:function(a){return f(a.productId)?(window.console&&console.log("Missing productId"),!1):d("productView",a)},pageView:function(){return d("pageView")},track:function(a,b){return d(a,b)},allowNonIdentifiedEvents:function(a){m=!a},ignoreDoNotTrackSetting:function(a){n=a},setCookieDomain:function(a){t=a}}}function b(a,b,c,d){var e;a=o+a,c&&(e=new Date,e.setTime(e.getTime()+864e5*c)),b=window.btoa(JSON.stringify(b)),document.cookie=a+"="+r(b)+(c?";expires="+e.toGMTString():"")+";path="+(d||"/")+(t?";domain="+t:"")}function c(a){a=o+a;var b=new RegExp("(^|;)[ ]*"+a+"=([^;]*)"),c=b.exec(document.cookie),d=c?JSON.parse(window.atob(s(c[2]))):0;return d}function d(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function e(a){return"string"==typeof a||a instanceof String}function f(a){return void 0===a||"object"==typeof a&&0===Object.keys(a).length&&JSON.stringify(a)===JSON.stringify({})}function g(){var a,b,c;for(a=0;a<arguments.length;a+=1)c=arguments[a],b=c.shift(),e(b)?"function"==typeof x[b]?x[b].apply(x,c):window.console&&console.log("Invalid tracker function: "+b):b.apply(x,c)}function h(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<_rmData.length;d++)if(_rmData[d]&&_rmData[d][0]){var e=_rmData[d][0];c===e&&(g(_rmData[d]),delete _rmData[d])}}function i(){return{push:g}}var j=null,k={email:null,identityGUID:null,trackingId:null,id:null},l="https://webhooks.remarkety.com/api/v1",m=!0,n=!1,o="_rm_",p="sessionId",q="_rmId",r=window.encodeURIComponent,s=window.decodeURIComponent,t=!1,u=!0,v=!0,w=[],x=new a,y=c(p);"object"==typeof y&&(y.email&&(k.email=y.email),y.identityGUID&&(k.identityGUID=y.identityGUID,u=!1),y.trackingId&&(k.trackingId=y.trackingId),y.hasOwnProperty("id")&&y.id&&(k.id=y.id));var z=["setStoreKey","setCustomer"];h(z);var A=d(q);if(null!==A&&""!==A){var B=JSON.parse(JSON.stringify(k));B.trackingId=A,x.setCustomer(B)}for(var C=0;C<_rmData.length;C++)_rmData[C]&&g(_rmData[C]);_rmData=new i;var D=setInterval(function(){"complete"===document.readyState&&(clearInterval(D),_rmData.push(["pageView"]))},100);return{}}());