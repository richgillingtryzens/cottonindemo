function ConsoleLogInfo(e){SitePreferences.TRADESTATE_LOG_INFO_ENABLE&&console.info(e)}var TFA_beginScript=window.performance.now(),TFA_date=new Date,TFA_timestamp=TFA_date.getUTCFullYear()+"-"+("00"+(TFA_date.getUTCMonth()+1)).slice(-2)+"-"+("00"+TFA_date.getUTCDate()).slice(-2)+" "+("00"+TFA_date.getUTCHours()).slice(-2)+":"+("00"+TFA_date.getUTCMinutes()).slice(-2)+":"+("00"+TFA_date.getUTCSeconds()).slice(-2),TFA_SESSION_PING_INTRVL=3e4,TFA_product_id="-",TFA_product_name="-",TFA_tag="TFA_2.1.7] ",TFA_svcProtocol="https://",TFA_AJAX_LOG_TIMEOUT=5e3,TFA_AJAX_GEO_TIMEOUT=5e3,TFA_PLATFORM_SESSION_KEYS=["CACHED_FRONT_FORM_KEY","sid","JSESSIONID","PLAY_SESSION","PHPSESSID"],TFA_requestId="-",TFA_webDomain="-",TFA_grayHost="-",TFA_geoHost="-",TFA_userSession="-",TFA_pageUrl="-",TFA_pageTag="-",TFA_refUrl="-",TFA_trafficSrc="-",TFA_ipAddr="0.0.0.0",TFA_geoLat="-",TFA_geoLon="-",TFA_postCode="-",TFA_countryCode="-",TFA_country="-",TFA_city="-",TFA_msname="-",TFA_mscode="-",TFA_device="desktop",TFA_browser="-",tfa={updateTimeStamp:function(){var e=new Date;return e.getUTCFullYear()+"-"+("00"+(e.getUTCMonth()+1)).slice(-2)+"-"+("00"+e.getUTCDate()).slice(-2)+" "+("00"+e.getUTCHours()).slice(-2)+":"+("00"+e.getUTCMinutes()).slice(-2)+":"+("00"+e.getUTCSeconds()).slice(-2)},sendData:function(t,e){var o=0,n=window.performance.now();window.jQuery?"-"!==TFA_grayHost&&null!==TFA_grayHost?(ConsoleLogInfo("%sSending %s data....",TFA_tag,t),jQuery.ajax({url:TFA_svcProtocol+TFA_grayHost+"/gelf",data:JSON.stringify(e),type:"POST",timeout:TFA_AJAX_LOG_TIMEOUT,complete:function(e){202==e.status&&"Accepted"==e.statusText?(o=window.performance.now(),ConsoleLogInfo("%sIt took %s ms to post the message to graylog",TFA_tag,Math.floor(o-n)),ConsoleLogInfo("%sStatus: %s, Response: %s",TFA_tag,e.status,e.statusText)):console.error("%s%s occured while sending <%s> data to the log host",TFA_tag,e.statusText,t)}})):console.warn("%sNeither accurate nor host (destination) has been specified for stats",TFA_tag):console.warn("%s-- jQuery not loaded --",TFA_tag)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return r=16*Math.random()|0,v="x"==e?r:3&r|8,v.toString(16)})},realtimeStats:function(e){this.identifyTrafficOrigin(),TFA_browser=this.getBrowserVersion();var t=this.deviceType.any();"tryzens"!==t&&"robot"!==t&&"mobile"!==t||(TFA_device=t),this.getGeoLocation(e)},identifyTrafficOrigin:function(){var e;null===(e=document.cookie.replace(/(?:(?:^|.*;\s*)tfa_tra_src\s*\=\s*([^;]*).*$)|^.*$/,"$1"))||""===e?(TFA_trafficSrc=this.getTrafficSource(),document.cookie="tfa_tra_src="+TFA_trafficSrc+";path=/"):TFA_trafficSrc=e},getSessionId:function(){for(var e="-",t=0;t<TFA_PLATFORM_SESSION_KEYS.length;t++)if(sessId=document.cookie.match(TFA_PLATFORM_SESSION_KEYS[t]+"[^;]+"),null!==sessId){e=sessId instanceof Array?sessId[0].substring(TFA_PLATFORM_SESSION_KEYS[t].length+1):sessId.substring(TFA_PLATFORM_SESSION_KEYS[t].length+1);break}return e},getTrafficSource:function(){return"-"===TFA_refUrl?"Direct":0===TFA_refUrl.search("https?://(.*)google.([^/?]*)")?"Google":0===TFA_refUrl.search("https?://(.*)facebook.([^/?]*)")?"Facebook":0===TFA_refUrl.search("https?://(.*)linkedin.([^/?]*)")?"Linkedin":0===TFA_refUrl.search("https?://(.*)twitter.([^/?]*)")||0===TFA_refUrl.search("https?://t.co/([^/?]*)")?"Twitter":0===TFA_refUrl.search("https?://(.*)bing.([^/?]*)")?"Bing":0===TFA_refUrl.search("https?://(.*)yahoo.([^/?]*)")?"Yahoo":0===TFA_refUrl.search("https?://(.*)tryzens.([^/?]*)")?"Tryzens":0===TFA_refUrl.search("https?://(.*)ebay.([^/?]*)")?"ebay":"Other"},deviceType:{Tryzens:function(){return navigator.userAgent.match(/Tryz/i)},Spider:function(){return navigator.userAgent.match(/Bot|Spider|Crawler/i)},Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry|PlayBook|BB\d+/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Nokia:function(){return navigator.userAgent.match(/NokiaBrowser/i)},any:function(){return tfa.deviceType.Tryzens()?"tryzens":tfa.deviceType.Spider()?"robot":tfa.deviceType.Android()||tfa.deviceType.BlackBerry()||tfa.deviceType.iOS()||tfa.deviceType.Opera()||tfa.deviceType.Windows()||tfa.deviceType.Nokia()?"mobile":void 0}},getBrowserVersion:function(){navigator.appVersion;var e,t,o,n,s=navigator.userAgent,a=navigator.appName,r=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return-1!=(t=s.indexOf("OPR/"))?(a="Opera",r=s.substring(t+4)):-1!=(t=s.indexOf("Opera"))?(a="Opera",r=s.substring(t+6),-1!=(t=s.indexOf("Version"))&&(r=s.substring(t+8))):-1!=(t=s.indexOf("MSIE"))?(a="Internet Explorer",r=s.substring(t+5)):-1!=(t=s.indexOf("Trident/"))?(a="Internet Explorer",n=s.indexOf("rv:"),r=s.substring(n+3,s.indexOf(".",n))):-1!=(t=s.indexOf("Edge/"))?(a="Internet Explorer",r=s.substring(t+5,s.indexOf(".",t))):-1!=(t=s.indexOf("Chrome"))?(a="Chrome",r=s.substring(t+7)):-1!=(t=s.indexOf("Safari"))?(a="Safari",r=s.substring(t+7),-1!=(t=s.indexOf("Version"))&&(r=s.substring(t+8))):-1!=(t=s.indexOf("Firefox"))?(a="Firefox",r=s.substring(t+8)):(e=s.lastIndexOf(" ")+1)<(t=s.lastIndexOf("/"))&&(a=s.substring(e,t),r=s.substring(t+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),-1!=(o=r.indexOf(";"))&&(r=r.substring(0,o)),-1!=(o=r.indexOf(" "))&&(r=r.substring(0,o)),i=parseInt(""+r,10),isNaN(i)&&(r=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),a+" "+i},getGeoLocation:function(s){window.jQuery?"-"!==TFA_geoHost&&null!==TFA_geoHost?(TFA_userSession=tfa.getSessionId(),jQuery.ajax({url:TFA_svcProtocol+TFA_geoHost+"/geo",type:"GET",dataType:"jsonp",timeout:TFA_AJAX_GEO_TIMEOUT,error:function(e,t,o){console.error("%s%s occured while calling the geo location service",TFA_tag,t)},success:function(e){TFA_country=e.country,TFA_countryCode=e.country_code,TFA_city=e.city,TFA_postCode=e.postcode,TFA_geoLat=e.lat,TFA_geoLon=e.lon,TFA_ipAddr=e.ip,TFA_msname=e.msname,TFA_mscode=e.mscode},complete:function(e,t){s||(ConsoleLogInfo("%s%s: %s",TFA_tag,"Timestamp",TFA_timestamp),ConsoleLogInfo("%s%s: %s",TFA_tag,"Domain Name",TFA_webDomain),ConsoleLogInfo("%s%s: %s",TFA_tag,"Traffic source",TFA_trafficSrc),ConsoleLogInfo("%s%s: %s",TFA_tag,"Page Tag",TFA_pageTag),ConsoleLogInfo("%s%s: %s",TFA_tag,"Page URL",TFA_pageUrl),ConsoleLogInfo("%s%s: %s",TFA_tag,"Referrer",TFA_refUrl),ConsoleLogInfo("%s%s: %s",TFA_tag,"Session",TFA_userSession),ConsoleLogInfo("%s%s: %s",TFA_tag,"Request Id",TFA_requestId),ConsoleLogInfo("%s%s: %s",TFA_tag,"Browser",TFA_browser),ConsoleLogInfo("%s%s: %s",TFA_tag,"Device",TFA_device),ConsoleLogInfo("%s%s: %s",TFA_tag,"IP",TFA_ipAddr),ConsoleLogInfo("%s%s: %s",TFA_tag,"Country Code",TFA_countryCode),ConsoleLogInfo("%s%s: %s",TFA_tag,"Country",TFA_country),ConsoleLogInfo("%s%s: %s",TFA_tag,"City",TFA_city),ConsoleLogInfo("%s%s: %s",TFA_tag,"Post Code",TFA_postCode),ConsoleLogInfo("%s%s: %s",TFA_tag,"Latitude",TFA_geoLat),ConsoleLogInfo("%s%s: %s",TFA_tag,"Longitude",TFA_geoLon),ConsoleLogInfo("%s%s: %s",TFA_tag,"Most Specific Name",TFA_msname),ConsoleLogInfo("%s%s: %s",TFA_tag,"Most Specific Code",TFA_mscode),ConsoleLogInfo("%s%s: %s",TFA_tag,"Product Id",TFA_product_id),ConsoleLogInfo("%s%s: %s",TFA_tag,"Product Name",TFA_product_name));var o="RealtimeStats";s&&(o="SessionPing");var n={version:"1.0",host:TFA_webDomain,short_message:"Tryzens RUM analytics",_message_type:o,_guid:TFA_requestId,_traffic_src:TFA_trafficSrc,_page_tag:TFA_pageTag,_page_url:TFA_pageUrl,_page_referrer:TFA_refUrl,_user_session:TFA_userSession,_user_browser:TFA_browser,_user_device:TFA_device,_geo_ip:TFA_ipAddr,_geo_country_code:TFA_countryCode,_geo_country:TFA_country,_geo_city:TFA_city,_geo_postcode:TFA_postCode,_geo_latitude:TFA_geoLat,_geo_longitude:TFA_geoLon,_geo_ms_name:TFA_msname,_geo_ms_code:TFA_mscode,_product_id:TFA_product_id,_product_name:TFA_product_name,_date:TFA_timestamp};tfa.sendData(o,n)}})):console.warn("%sNeither accurate nor host (destination) has been specified for geo service",TFA_tag):console.warn("%s-- jQuery not loaded --",TFA_tag)},getPageLoadTimes:function(){var e=document.body.getAttribute("journey-ip");if(""==e||""!=e&&null!=e&&-1!=e.indexOf(TFA_ipAddr)){performance.setResourceTimingBufferSize(500);for(var t=window.performance.getEntries(),o=0,n=0,s=0,a=0,r=0,i=0,_=0,d=0,g=0,T=0,c=0,u=0;u<t.length;u++)"iframe"==t[u].initiatorType?(o++,n+=t[u].encodedBodySize):"css"==t[u].initiatorType?0<=t[u].name.indexOf(".svg")||-1!=t[u].name.indexOf(".png")||-1!=t[u].name.indexOf(".jpg")?(r++,i+=t[u].encodedBodySize):-1!=t[u].name.indexOf(".css")?(s++,a+=t[u].encodedBodySize):(g++,T+=t[u].encodedBodySize):"img"==t[u].initiatorType?(r++,i+=t[u].encodedBodySize):"script"==t[u].initiatorType?(_++,d+=t[u].encodedBodySize):"link"==t[u].initiatorType?-1!=t[u].name.indexOf(".css")?(s++,a+=t[u].encodedBodySize):(g++,T+=t[u].encodedBodySize):"navigation"==t[u].initiatorType?c+=t[u].encodedBodySize:null!=t[u].encodedBodySize&&(g++,T+=t[u].encodedBodySize);var A="image".concat("=",r,"@",i,";","html=",o,"@",n,";","other=",g,"@",T,";","javascript=",_,"@",d,";","css=",s,"@",a,";"),f=o+s+r+_+g,l=window.performance.timing,F=tfa.getSessionId(),m=l.redirectEnd-l.redirectStart,p=(l.domainLookupStart,l.fetchStart,l.domainLookupEnd,l.domainLookupStart,l.connectEnd-l.connectStart),y=(l.responseStart,l.requestStart,l.responseEnd-l.responseStart),S=(l.domComplete,l.domLoading,l.loadEventEnd,l.loadEventStart,l.loadEventEnd-l.navigationStart),I=l.domContentLoadedEventEnd-l.navigationStart,h=l.responseStart-l.requestStart,v=l.responseStart-l.navigationStart,L=n+a+i+d+T+c,C=document.documentElement.innerHTML.length;ConsoleLogInfo("%s%s: %s",TFA_tag,"Timestamp",TFA_timestamp),ConsoleLogInfo("%s%s: %s",TFA_tag,"Page Tag",TFA_pageTag),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to FullyLoaded",S),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to DOMContentLoaded",I),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to FirstByte",h),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to Connect",p),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to Redirect",m),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to DownloadResponse",y),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to ResponseTime",v),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to ByteSize",L),ConsoleLogInfo("%s%s: %s ms",TFA_tag,"Time to HTMLByteSize",C);var w="PageLoadTimeStats",b={version:"1.0",host:TFA_webDomain,short_message:"Tryzens RUM analytics",_message_type:w,_guid:TFA_requestId,_page_tag:TFA_pageTag,_page_url:TFA_pageUrl,_user_session:F,_user_device:TFA_device,_time_to_redirect:m,_time_to_connect:p,_time_to_first_byte:h,_time_to_download_response:y,_time_dom_content_loaded:I,_time_fully_loaded:S,_response_time:v,_byte_size:L,_html_byte_size:C,_assets:A,_total_assets:f,_date:TFA_timestamp};tfa.sendData(w,b)}},fullyLoaded:function(){setTimeout(tfa.getPageLoadTimes,5)},updateTSBodyAttributes:function(){var e,t=document.getElementById("ts_page_identifier"),o=document.getElementById("ts_geo_host"),n=document.getElementById("ts_gray_host"),s=document.getElementById("ts_journey_ip");t&&o&&n&&s&&((e=document.getElementsByTagName("body")[0]).setAttribute("rum-id",t.value),e.setAttribute("geo-host",o.value),e.setAttribute("gray-host",n.value),"null"!=s.value?e.setAttribute("journey-ip",s.value):e.setAttribute("journey-ip",""))},documentReady:function(){tfa.updateTSBodyAttributes(),setTimeout(tfa.getRequestStats,5),bSessionPing=document.body.getAttribute("session-ping"),"enabled"===bSessionPing&&setTimeout(tfa.postSession,TFA_SESSION_PING_INTRVL)},postSession:function(){tfa.updateTimeStamp(),tfa.realtimeStats(!0),setTimeout(tfa.postSession,TFA_SESSION_PING_INTRVL)},addMarker:function(){var e=document.createElement("span");e.id="tfa-load-complete",e.innerHTML="\x3c!-- page load complete --\x3e",document.getElementsByTagName("body")[0].appendChild(e)},getRequestStats:function(){if(window.jQuery){TFA_requestId=tfa.guid(),TFA_webDomain=window.location.hostname,TFA_pageTag=document.body.getAttribute("rum-id"),TFA_pageUrl=window.location.href,""===(TFA_refUrl=document.referrer)&&(TFA_refUrl="-"),TFA_grayHost=document.body.getAttribute("gray-host"),TFA_geoHost=document.body.getAttribute("geo-host");var e=document.getElementById("tfa-params"),t={};if(null!==e){var o=e.getElementsByTagName("input");if(null!==o)for(i=0;i<o.length;i++)t[o[i].getAttribute("name")]=o[i].value}t.hasOwnProperty("absolute_domain")&&""!==t.absolute_domain&&(TFA_webDomain=t.absolute_domain),t.hasOwnProperty("product_id")&&""!==t.product_id&&(TFA_product_id=t.product_id),t.hasOwnProperty("product_name")&&""!==t.product_name&&(TFA_product_name=t.product_name),tfa.realtimeStats(!1);var n=window.performance.now();ConsoleLogInfo("%s***** It took %s ms to execute the script ******",TFA_tag,Math.floor(n-TFA_beginScript))}else console.warn("%s-- jQuery not loaded --",TFA_tag)}};"performance"in window&&"timing"in window.performance&&"navigation"in window.performance?(window.addEventListener("DOMContentLoaded",tfa.documentReady,!1),window.addEventListener("load",tfa.fullyLoaded,!1)):console.warn("%sNavigation API is not supported",TFA_tag);